<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Web3 - 雲見證 | 編輯器</title>
    <link rel="stylesheet" href="index.css" />

    <!-- Quill CSS -->
    <link
      href="https://cdn.quilljs.com/1.3.6/quill.snow.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles/editor.css" />
    <link rel="stylesheet" href="styles/toast.css" />
    <link rel="stylesheet" href="styles/confirm.css" />

    <!-- Quill JS -->
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
    <script src="https://unpkg.com/dexie/dist/dexie.js"></script>
  </head>
  <body>
    <!-- 導航欄 -->
    <nav class="navbar">
      <div class="nav-container">
        <a href="index.html" class="logo">Web3 - 雲見證</a>
        <!-- 桌面版選單 -->
        <ul class="nav-menu">
          <li><a href="index.html">首頁</a></li>
          <li><a href="#">關於我</a></li>
          <li><a href="#">註冊&登入</a></li>
          <li><a href="#">一般見證</a></li>
          <li><a href="#">教會資源典藏</a></li>
          <li><a href="#">IPFS上鏈</a></li>
        </ul>
        <!-- 漢堡選單按鈕 -->
        <div class="hamburger" onclick="toggleMenu()">
          <span></span>
          <span></span>
          <span></span>
        </div>
      </div>
      <!-- 手機版選單 -->
      <div class="mobile-menu" id="mobileMenu">
        <ul>
          <li><a href="index.html" onclick="closeMenu()">首頁</a></li>
          <li><a href="#" onclick="closeMenu()">關於我</a></li>
          <li><a href="#" onclick="closeMenu()">註冊&登入</a></li>
          <li><a href="#" onclick="closeMenu()">一般見證</a></li>
          <li><a href="#" onclick="closeMenu()">教會資源典藏</a></li>
          <li><a href="#" onclick="closeMenu()">IPFS上鏈</a></li>
        </ul>
      </div>
    </nav>

    <!-- 編輯器主體 -->
    <div class="editor-container">
      <div class="editor-wrapper">
        <!-- 標題區域 -->
        <div class="editor-header">
          <input
            type="text"
            class="editor-title"
            placeholder="請輸入見證標題..."
            id="postTitle"
          />
        </div>

        <!-- Quill 編輯器 -->
        <div id="editor"></div>

        <!-- 底部操作區域 -->
        <div class="editor-footer">
          <div class="editor-meta">
            <div class="meta-item">
              <span>📝</span>
              <span id="wordCount">0 字</span>
            </div>
            <div class="meta-item">
              <span>⏱️</span>
              <span id="lastSaved">尚未儲存</span>
            </div>
          </div>
          <div class="editor-actions">
            <button class="btn-editor btn-cancel" onclick="cancelEdit()">
              取消
            </button>
            <button class="btn-editor btn-save-draft" onclick="saveDraft()">
              儲存草稿
            </button>
            <button class="btn-editor btn-publish" onclick="publishPost()">
              發佈見證
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Toast 容器 -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- 確認視窗 -->
    <div class="modal-overlay" id="confirmModal">
      <div class="confirm-modal" id="confirmModalContent">
        <div class="confirm-header">
          <div class="confirm-icon" id="confirmIcon">
            <span id="confirmIconSymbol">!</span>
          </div>
          <h2 class="confirm-title" id="confirmTitle"></h2>
        </div>
        <p class="confirm-message" id="confirmMessage"></p>
        <div class="confirm-actions">
          <button
            class="confirm-btn confirm-btn-secondary"
            id="confirmCancel"
          ></button>
          <button
            class="confirm-btn confirm-btn-primary"
            id="confirmOk"
          ></button>
        </div>
      </div>
    </div>

    <script src="./scripts/utils.js"></script>
    <script src="./scripts/editor.js"></script>
  </body>
</html>
